<!DOCTYPE html>

<head>
    <title>Java Script</title>
    <!-- 강사님 049.html -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
</head>

<style>
    #vendorBody {
        align-conent: center;
        border: 2px solid;
        width: 80%;
        background-color: rgb(190, 255, 255);


    }


    #headDisplay {
        text-align: center;
        background-color: greenyellow;

    }


    #end {
        text-align: center;
        background-color: pink;

    }

    #drinkButton {
        padding: 5px;
    }

    #drinkBox {
        align-content: center;
    }



    .drinkImg {
        width: 100px;
        align-content: center;
        margin-left: 120px;
    }
</style>

<body>
    <!-- //음료 목록
    // 코카콜라 - 700원, 오렌지주스 - 1200원, 커피-500원, 물-700원
    // 보리차 -1200원, 포카리-1000원, 뽀로로-1300원
    // 각기 음료는 총 5개씩 있습니다.

    //고객 지갑 - 10000원
    //음료 자판기 최초 잔도 - 1000원

    //동전 투입 - 100원, 500원, 1000원 -->


    <div class="container" id=vendorBody>
        <div id=headDisplay>
            <h2> 영업중 </h2>
        </div>

        <div class="row">

            <div class="col" id=drinkBox>
                <img src="https://image.flaticon.com/icons/png/512/415/415699.png" alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(1)" class="btn btn-primary">코카콜라 <br> 700냥 <br> 재고수<span
                            id="drink_stock1">5</span></button>
                </div>
            </div>

            <div class="col">
                <img src="https://image.freepik.com/free-vector/orange-juice_1284-825.jpg" alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(2)" class="btn btn-primary"> 오렌지주스 <br> 1200냥 <br>
                        재고수<span id="drink_stock2">5</span></button>
                </div>
            </div>


            <div class="col">
                <img src="https://hanaroyes.com/product/128/507/F579.jpg" alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(3)" class="btn btn-primary"> 커피 <br> 500냥 <br> 재고수<span
                            id="drink_stock3">5</span></button>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col" id=drinkBox>
                <img src="https://image.flaticon.com/icons/png/512/1240/1240059.png" alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(4)" class="btn btn-primary"> 물 <br> 700냥 <br> 재고수<span
                            id="drink_stock4">5</span></button>
                </div>
            </div>

            <div class="col">
                <img src="http://img.danawa.com/prod_img/500000/940/179/img/3179940_1.jpg?shrink=360:360&_v=20180321141054"
                    alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(5)" class="btn btn-primary"> 보리차 <br> 1200냥 <br>
                        재고수<span id="drink_stock5">5</span></button>
                </div>
            </div>


            <div class="col">
                <img src="https://lh3.googleusercontent.com/proxy/0OY3-ihb99PWQH-U9I7gRtHOY6WgtF4gcs4ByjsniQxmMva3hE1EFjONRdvaWswXsdbo01vl2WaW4cCxKc8-tueX639MPCv60BebTzj8"
                    alt="..." class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(6)" class="btn btn-primary"> 포카리 <br> 1000냥 <br>
                        재고수<span id="drink_stock6">5</span></button>
                </div>
            </div>
        </div>


        <div class="row">

            <div class="col" id=drinkBox>
                <img src="http://www.thessan.com/shopimages/thessancom/0060010000322.jpg?1476756803" alt="..."
                    class="drinkImg">
                <div class="row" id=drinkButton>
                    <button type="button" onclick="requestDrink(7)" class="btn btn-primary"> 뽀로로 <br> 1300냥 <br>
                        재고수<span id="drink_stock7">5</span></button>
                </div>
            </div>

            <div class="col" id=drinkBox style="margin-left: 300px; margin-top: 20px;">
                <!-- <div style="margin: 3px;"> -->
                <button type="button" class="btn btn-primary"> 동전 </button>
                <!-- </div> -->
                <button onclick="inputAmount(100)">100원</button>
                <button onclick="inputAmount(500)">500원</button>
                <button onclick="inputAmount(1000)">1000원</button>

                <div class="row">
                    <div class="row" id=>
                        <div style="margin: 3px;"> <button type="button" class="btn btn-primary"> 지갑 잔액 </button>
                            <!-- <div><span id="current01"></span> </div> -->
                            <input type="text" name="" id="total_customer_amount" value="10000" readonly></span>
                        </div>
                        <div>

                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="row" id=>
                        <div style="margin: 3px;"> <button type="button" class="btn btn-primary"> 투입 금액 </button>
                            <input type="text" name="" id="total_input_amount" value="0" readonly></span>

                        </div>
                    </div>
                    <div class="row">
                        <div style="margin: 3px;"> <button type="button" class="btn btn-primary"> 잔돈 </button>
                            <input type="text" name="" id="total_vending_amount" value="0" readonly>
                        </div>
                        <div class="row" id=drinkButton>
                        </div>
                    </div>

                </div>
            </div>



            <div stye id="output"
                style="width:100%;height:150px;overflow-y: auto;border:2px solid #222; background-color: rgb(175, 175, 175);">
            </div>


        </div>




    </div>



    <script>
        //음료 목록
        //코카콜라 - 700원, 오렌지주스-1200, 커피-500, 물-700원
        //보리차 - 1200원, 포카리-1000원, 뽀로로-1300원
        //각가의 음료는 총 5개씩 있습니다.

        //고객 지갑 - 10000원
        //음료자판기 최초 잔도 - 1000원

        //동전 투입 - 100원, 500원, 1000원

        let total_vending_amount = 1000;
        let total_customer_amount = 10000;
        let total_input_amount = 0;

        let drinkList = [{
                drinkId: "1",
                drinkName: "코카콜라",
                price: 700,
                stock: 5
            },
            {
                drinkId: "2",
                drinkName: "오렌지주스",
                price: 1200,
                stock: 5
            },
            {
                drinkId: "3",
                drinkName: "커피",
                price: 500,
                stock: 5
            },
            {
                drinkId: "4",
                drinkName: "물",
                price: 700,
                stock: 5
            },
            {
                drinkId: "5",
                drinkName: "보리차",
                price: 1200,
                stock: 5
            },
            {
                drinkId: "6",
                drinkName: "포카리",
                price: 1000,
                stock: 5
            },
            {
                drinkId: "7",
                drinkName: "뽀로로",
                price: 1300,
                stock: 5
            }
        ];


        function inputAmount(amount) {
            var output = document.getElementById("output");

            console.log(amount);
            total_input_amount += amount;
            total_customer_amount -= amount;

            document.getElementById("total_customer_amount").value = total_customer_amount;
            document.getElementById("total_input_amount").value = total_input_amount;


            //입력한 돈이 고객의 지갑에 있는 돈 보다 같거나 작은지 확인
            //만일 작다면
            //total_vending_amount에 투입한 amount 더하기
            //total_customer_amount에서 투입한 amount 빼기
            //total_input_amount에 투입한 amount 더하기

            //만일 크다면
            //선택한 투입금액은 내 지갑에 있는 돈보다 크니까.. 메시지 출력
        }

        function requestDrink(drinkId) {
            let drink = drinkList.filter(d => d.drinkId == drinkId)[0];
            if (drink.stock > 0) {
                if (total_input_amount >= drink.price) {
                    let changes = total_input_amount - drink.price;
                    if (total_vending_amount >= changes) {
                        output.insertAdjacentHTML("beforeend",
                            `<p>${drink.drinkName} 음료가 나왔습니다. 잔돈 ${changes}이 나옵니다.</p>`);
                        total_customer_amount += changes;
                        drink.stock -= 1;
                        total_input_amount = 0;
                        total_vending_amount -= changes;

                        document.getElementById("total_input_amount").value = total_input_amount;
                        document.getElementById("total_customer_amount").value = total_customer_amount;
                        document.getElementById("total_vending_amount").value = total_vending_amount;


                        document.getElementById("drink_stock" + drinkId).innerText = drink.stock;

                        output.insertAdjacentHTML("beforeend",
                            `<p>이제 당신 지갑에는 총 ${total_customer_amount} 있습니다.</p>`);
                    } else {
                        output.insertAdjacentHTML("beforeend",
                            `<p>음료자판기에 잔돈이 없어서 ${drink.drinkName} 음료를 구매할 수 없습니다.</p>`);
                    }
                } else {
                    output.insertAdjacentHTML("beforeend",
                        `<p>투입하신 금액은 총 ${total_input_amount}인데, 음료 가격은 ${drink.price}여서 구매할 수 없습니다.</p>`);
                }
            } else {
                output.insertAdjacentHTML("beforeend", `<p>선택하신 음료 ${drink.drinkName}이 재고가 없습니다.</p>`);
            }
            output.scrollTop = output.scrollHeight;
        }
    </script>
</body>

</html>